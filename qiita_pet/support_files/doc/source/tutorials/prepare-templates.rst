.. _prepare-templates:

.. index:: prepare-templates

Templates
=========

The set of required fields for the *sample template* and *prep template*
files varies based on the functionality that you want to use from the
system.

Sample template
---------------

Required fields for Qiita
~~~~~~~~~~~~~~~~~~~~~~~~~

This is the minimum set of columns for a sample template to be added to
the system:

+-------------------+-------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------+
| Field name        | Format                        | Description                                                                                                                                            |
+===================+===============================+========================================================================================================================================================+
| ``sample_name``   | free text with restrictions   | Identifies a sample. It is the primary key and must be unique. Allowed characters are alphabetic ``[A-Za-z]``, numeric ``[0-9]``, and periods ``.``.   |
+-------------------+-------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------+

Required fields for EBI submission
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

These are the columns required for successfully submit your data to EBI:

+----------------------------------+----------------------+----------------------------------------------------------------------------------------------------------+
| Field name                       | Format               | Description                                                                                              |
+==================================+======================+==========================================================================================================+
| ``collection_timestamp``         | ``mm/dd/yy hh:mm``   | Date and time with time in 24-hour format in which the sample was collected.                             |
+----------------------------------+----------------------+----------------------------------------------------------------------------------------------------------+
| ``physical_specimen_location``   | free text            | Where you would go to find physical sample or DNA, regardless of whether it is still available or not.   |
+----------------------------------+----------------------+----------------------------------------------------------------------------------------------------------+

Required fields for centralized Qiita
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

These are the columns required if you want to make your date public at
the centralized `Qiita server <http://qiita.microbio.me>`__:

+-----------------------------------+----------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Field name                        | Format                                                               | Description                                                                                                                                                                                                                                 |
+===================================+======================================================================+=============================================================================================================================================================================================================================================+
| ``sample_type``                   | free text                                                            | Description of the type of sample.                                                                                                                                                                                                          |
+-----------------------------------+----------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| ``description``                   | free text                                                            | Description of the sample.                                                                                                                                                                                                                  |
+-----------------------------------+----------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| ``physical_specimen_remaining``   | ``y`` or ``n``                                                       | Is there still physical sample (e.g., soil, not DNA) available?                                                                                                                                                                             |
+-----------------------------------+----------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| ``dna_extracted``                 | ``y`` or ``n``                                                       | Has DNA already been extracted for this sample?                                                                                                                                                                                             |
+-----------------------------------+----------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| ``latitude``                      | `decimal degrees <http://en.wikipedia.org/wiki/Decimal_degrees>`__   | Latitude where sample was collected.                                                                                                                                                                                                        |
+-----------------------------------+----------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| ``longitude``                     | `decimal degrees <http://en.wikipedia.org/wiki/Decimal_degrees>`__   | Longitude where sample was collected.                                                                                                                                                                                                       |
+-----------------------------------+----------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| ``host_subject_id``               | free text                                                            | An identifier for the "host". Should be specific to a host, and can be a one-to-many relationship with samples. If this is not a host-associated study, this can be an identifier for a replicate, or can be the same as ``sample_name``.   |
+-----------------------------------+----------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Prep template
-------------

Required fields for Qiita
~~~~~~~~~~~~~~~~~~~~~~~~~

This is the minimum set of columns for a prep template to be added the
system:

+-------------------+-------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Field name        | Format                        | Description                                                                                                                                                                                          |
+===================+===============================+======================================================================================================================================================================================================+
| ``sample_name``   | free text with restrictions   | Identifies a sample. It is the primary key, must be unique and should match the ones in the sample template. Allowed characters are alphabetic ``[A-Za-z]``, numeric ``[0-9]``, and periods ``.``.   |
+-------------------+-------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Required fields for EBI submission
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

These are the columns required for successfully submit your data to EBI:

+-------------------------------------+-------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Field name                          | Format                                    | Description                                                                                                                                                                                                                         |
+=====================================+===========================================+=====================================================================================================================================================================================================================================+
| ``primer``                          | IUPAC characters                          | The primer sequence (this is usually the forward primer; `examples <http://www.nature.com/ismej/journal/v6/n8/extref/ismej20128x2.txt>`__).                                                                                         |
+-------------------------------------+-------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| ``center_name``                     | free text                                 | Name of the sequencing facility.                                                                                                                                                                                                    |
+-------------------------------------+-------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| ``platform``                        | ``Illumina`` or ``FLX`` or ``Titanium``   | The sequencing technology used in the study. ``Illumina`` sequencing data was generated on an Illumina platform; ``FLX`` sequencing data was generated with 454 FLX; ``Titanium`` sequencing data was generated with 454 Titanium   |
+-------------------------------------+-------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| ``library_construction_protocol``   | free text                                 | Brief description or reference to the protocol that was used for preparing this amplicon library starting from DNA, usually this includes what genomic region was targeted such as *16S*, *ITS*, *18S*, etc.                        |
+-------------------------------------+-------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| ``experiment_design_description``   | free text                                 | High-level description of the study (for example, *A longitudinal study of the gut microbiome of two human subjects*).                                                                                                              |
+-------------------------------------+-------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Required fields for pre-processing target gene data
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

If you are adding target gene data (e.g. 16S, 18S, ITS), there are
additional columns that are required for successfully preprocessing
them:

+---------------+--------------------+-----------------------------------------------------------------------------------------------------------------------------------------------+
| Field name    | Format             | Description                                                                                                                                   |
+===============+====================+===============================================================================================================================================+
| ``primer``    | IUPAC characters   | The primer sequence (this is usually the forward primer; `examples <http://www.nature.com/ismej/journal/v6/n8/extref/ismej20128x2.txt>`__).   |
+---------------+--------------------+-----------------------------------------------------------------------------------------------------------------------------------------------+
| ``barcode``   | IUPAC characters   | The barcode sequence (`examples <http://www.nature.com/ismej/journal/v6/n8/extref/ismej20128x2.txt>`__).                                      |
+---------------+--------------------+-----------------------------------------------------------------------------------------------------------------------------------------------+

In case that your data has been sequenced using multiple lanes or you
have :ref:`per_sample_fastq_files_without_barcode_or_primer_information`, an
additional column is required.

+------------------+-------------+------------------------------------------------------------------------------------------------------------------------------------------+
| Field name       | Format      | Description                                                                                                                              |
+==================+=============+==========================================================================================================================================+
| ``run_prefix``   | free text   | Name of your sequence file without the suffix (for example, ``seqs.fna`` becomes ``seqs``, and ``my-data.fastq`` becomes ``my-data``).   |
+------------------+-------------+------------------------------------------------------------------------------------------------------------------------------------------+

Example files
-------------

You can download an example sample template and prep template from
`here <ftp://ftp.microbio.me/pub/qiita/sample_prep_template_examples.tgz>`__
